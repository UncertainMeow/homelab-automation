---
# Rawls - Infrastructure Node
# GitLab, Technitium DNS, Ansible, Terraform, Authentik

# ============================================
# Host Description
# ============================================
host_description: "Rawls - Infrastructure Node (GitLab, DNS, Automation)"

# ============================================
# GitLab Configuration (LXC + Omnibus)
# ============================================
gitlab_deploy: true

# LXC Container settings
gitlab_vmid: 204
gitlab_hostname: "gitlab"
gitlab_container_ip: "10.203.3.204"
gitlab_container_gateway: "10.203.3.1"
gitlab_container_cidr: "24"

# Container resources (GitLab needs at least 4GB, 8GB recommended)
gitlab_cores: 4
gitlab_memory: 8192      # 8GB RAM
gitlab_swap: 4096        # 4GB swap
gitlab_disk: "50G"       # Storage for GitLab + repos

# GitLab access URL
gitlab_external_url: "http://10.203.3.204"

# Timezone
gitlab_timezone: "America/Los_Angeles"

# ============================================
# Phase Control
# ============================================
# Rawls is an infrastructure node - different from GPU workstations
enable_pci_passthrough: false
enable_nvidia_setup: false
create_tailscale_router: false
create_vm_templates: false
download_lxc_templates: true   # Need Debian 12 template for GitLab
deploy_dotfiles: true
generate_snapshot: false

# User management
setup_users: true

# ============================================
# Future Services (to be enabled)
# ============================================
# technitium_deploy: false  # DNS server
# netbox_deploy: false      # IPAM
# authentik_deploy: false   # SSO/Identity
